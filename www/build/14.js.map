{"version":3,"sources":["../../src/pages/cetracking/cetracking.module.ts","../../src/pages/cetracking/cetracking.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["// Components, functions, plugins\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { Database } from '../providers/database/database';\r\nimport { Localstorage } from '../providers/localstorage/localstorage';\r\n\r\n// Pages\r\nimport { CetrackingPage } from './cetracking';\r\n\r\n@NgModule({\r\n  declarations: [CetrackingPage],\r\n  imports: [\r\n\tFormsModule,\r\n\tIonicPageModule.forChild(CetrackingPage)\r\n\t],\r\n  exports: [CetrackingPage]\r\n\r\n  })\r\n\r\n  export class CetrackingPageModule {}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cetracking/cetracking.module.ts","// Components, functions, plugins\r\nimport { Component, ChangeDetectionStrategy, ChangeDetectorRef, NgModule } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Events } from 'ionic-angular';\r\nimport { Storage } from '@ionic/storage';\r\nimport 'rxjs/add/operator/map';\r\nimport { Database } from './../../providers/database/database';\r\nimport { Localstorage } from './../../providers/localstorage/localstorage';\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-cetracking',\r\n  templateUrl: 'cetracking.html',\r\n})\r\n\r\nexport class CetrackingPage {\r\n\t\r\n\tpublic creditsTypeL: string;\r\n\tpublic creditsTypeP: string;\r\n\tpublic CEListing: any[] = [];\r\n\tpublic LegendDetails = false;\r\n\tpublic LegendDropdownIcon = 'arrow-dropdown-circle';\r\n\t\r\n\tconstructor(public navCtrl: NavController, \r\n\t\t\t\tpublic navParams: NavParams, \r\n\t\t\t\tprivate nav: NavController,\r\n\t\t\t\tprivate cd: ChangeDetectorRef,\r\n\t\t\t\tprivate storage: Storage,\r\n\t\t\t\tpublic events: Events,\r\n\t\t\t\tprivate databaseprovider: Database,\r\n\t\t\t\tprivate localstorage: Localstorage) {\r\n\r\n\t\t// Listen for sync events and \r\n\t\t// refresh side menu dashboard\r\n\t\tthis.events.subscribe('sync:Status', (SyncType) => {\r\n\t\t\tconsole.log('CetrackingPage: Sync has ', SyncType);\r\n\t\t\tthis.LoadCETrackerData();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\t\r\n\t\tconsole.log('ionViewDidEnter: CetrackingPage');\r\n\t\tthis.LoadCETrackerData();\r\n\r\n\t}\r\n\t\r\n\tLoadCETrackerData() {\r\n\t\t\r\n\t\tthis.CEListing = [];\r\n\t\tthis.cd.markForCheck();\r\n\t\t\r\n\t\t// Load / refresh data when coming to this page\r\n\t\tvar iconScan = \"\";\r\n\r\n\t\t// Icons\r\n\t\tvar iconCEScanPendingScan = 'qr-scanner';\r\n\t\tvar iconCEScanNotCompleted = 'close-circle';\r\n\t\tvar iconCEScanTimeInSession = 'timer';\r\n\t\tvar iconCEScanComplete = 'checkmark';\r\n\t\t\t\t\t\t\t\r\n\t\tvar sumCreditsL = 0;\r\n\t\tvar sumCreditsP = 0;\r\n\t\r\n\t\t/* Determine currently logged in user */\r\n\t\tvar AttendeeID = this.localstorage.getLocalValue('AttendeeID');\r\n\t\t\r\n\t\tif (AttendeeID != '' && AttendeeID != null) {\r\n\t\t\t\r\n\t\t\tconsole.log('Stored AttendeeID: ' + AttendeeID);\r\n\t\t\t\r\n\t\t\tthis.databaseprovider.getCETrackerData(AttendeeID).then(data => {\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"getCETrackerData: \" + JSON.stringify(data));\r\n\r\n\t\t\t\tif (data['length']>0) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < data['length']; i++) {\r\n\r\n\t\t\t\t\t\tvar EvalType = data[i].ce_credits_type.substring(0, 1);\r\n\r\n\t\t\t\t\t\tvar iconSet = 0;\r\n\r\n\t\t\t\t\t\tif (EvalType == \"\") {                                           // Evals that don't require an eval are completed\r\n\t\t\t\t\t\t\ticonScan = iconCEScanComplete;\r\n\t\t\t\t\t\t\ticonSet = 1;\r\n\t\t\t\t\t\t\t//sumCreditsL = sumCreditsL + parseFloat(data[i].CEcreditsL);\r\n\t\t\t\t\t\t\t//sumCreditsP = sumCreditsP + parseFloat(data[i].CEcreditsP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (data[i].ceStatusScan == \"0\" && iconSet == 0) {     \t\t\t// No scan (shouldn't happen with AACD)\r\n\t\t\t\t\t\t\ticonScan = iconCEScanPendingScan;\r\n\t\t\t\t\t\t\ticonSet = 1;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((data[i].Evaluated == \"0\" || data[i].Evaluated === null) && iconSet == 0) {     // Eval not completed\r\n\t\t\t\t\t\t\ticonScan = iconCEScanNotCompleted;\r\n\t\t\t\t\t\t\ticonSet = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (iconSet == 0) {                                             // Otherwise mark as completed\r\n\t\t\t\t\t\t\ticonScan = iconCEScanComplete;\r\n\t\t\t\t\t\t\t//sumCreditsL = sumCreditsL + parseFloat(data[i].CEcreditsL);\r\n\t\t\t\t\t\t\t//sumCreditsP = sumCreditsP + parseFloat(data[i].CEcreditsP);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsumCreditsL = sumCreditsL + parseFloat(data[i].CEcreditsL);\r\n\t\t\t\t\t\tsumCreditsP = sumCreditsP + parseFloat(data[i].CEcreditsP);\r\n\t\t\t\t\t\tconsole.log(\"CE Record: \" + data[i].session_title + \", Icon: \" + iconScan);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.CEListing.push({\r\n\t\t\t\t\t\t\tEventID: data[i].session_id,\r\n\t\t\t\t\t\t\tEvaluationType: EvalType,\r\n\t\t\t\t\t\t\tDisplayEventName: data[i].session_title,\r\n\t\t\t\t\t\t\tsessionScanStatusIcon: iconScan,\r\n\t\t\t\t\t\t\tnavigationRightArrow: \"arrow-dropright\"\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.creditsTypeL = sumCreditsL.toFixed(2);\r\n\t\t\t\t\tthis.creditsTypeP = sumCreditsP.toFixed(2);\r\n\t\t\t\t\tthis.cd.markForCheck();\r\n\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.CEListing.push({\r\n\t\t\t\t\t\tEventID: \"0\",\r\n\t\t\t\t\t\tEvaluationType: \"0\",\r\n\t\t\t\t\t\tDisplayEventName: \"No CE records available\",\r\n\t\t\t\t\t\tsessionScanStatusIcon: iconCEScanPendingScan,\r\n\t\t\t\t\t\tnavigationRightArrow: \"\"\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.creditsTypeL = '0.00';\r\n\t\t\t\t\tthis.creditsTypeP = '0.00';\r\n\t\t\t\t\tthis.cd.markForCheck();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}).catch(function () {\r\n\t\t\t\tconsole.log(\"Promise Rejected\");\r\n\t\t\t});\r\n\t\t\t\t\r\n\t\t} else {\r\n\t\t\tconsole.log('User not logged in');\r\n\t\t\tthis.creditsTypeL = '0.00';\r\n\t\t\tthis.creditsTypeP = '0.00';\r\n\t\t}\r\n\r\n\t\tthis.events.publish('user:Status', 'CE Tracker Update');\r\n\r\n\t}\r\n\r\n    toggleLegend() {\r\n\t\tconsole.log('Toggle Legend: ' + this.LegendDetails);\r\n        this.LegendDetails = !this.LegendDetails;\r\n\t\tswitch(this.LegendDetails) {\r\n\t\t\tcase true:\r\n\t\t\t\tthis.LegendDropdownIcon = 'arrow-dropup-circle';\r\n\t\t\t\tbreak;\r\n\t\t\tcase false:\r\n\t\t\t\tthis.LegendDropdownIcon = 'arrow-dropdown-circle';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n    };\r\n\t\r\n    isLegendShown() {\r\n        return this.LegendDetails;\r\n    };\r\n\r\n\tionViewDidLoad() {\r\n\t\tconsole.log('ionViewDidLoad: CetrackingPage');\r\n\t}\r\n\r\n\tSurvey(EventID, EvalType) {\r\n\t\tconsole.log(\"Survey clicked; SurveyID: \" + EventID + \"; Evaluation Type: \" + EvalType);\r\n\r\n\t\tif (EventID != \"0\") {\r\n\t\t\tthis.localstorage.setLocalValue('MassEval', \"1\");\r\n\t\t\tthis.localstorage.setLocalValue('EventID', EventID);\r\n\r\n\t\t\tif (EvalType == \"L\") {\r\n\t\t\t\t// Navigate to Lecture Evaluation page\r\n\t\t\t\tconsole.log('CE Tracker: Navigate to Lecture Evaluation');\r\n\t\t\t\tthis.navCtrl.push('EvaluationLecture', {EventID: EventID}, {animate: true, direction: 'forward'});\r\n\t\t\t}\r\n\t\t\tif (EvalType == \"P\") {\r\n\t\t\t\t// Navigate to Workshop Evaluation page\r\n\t\t\t\tconsole.log('CE Tracker: Navigate to Workshop Evaluation');\r\n\t\t\t\tthis.navCtrl.push('EvaluationWorkshop', {EventID: EventID}, {animate: true, direction: 'forward'});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n  \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cetracking/cetracking.ts"],"sourceRoot":""}