{"version":3,"sources":["../../src/pages/conversations/conversations.module.ts","../../src/pages/conversations/conversations.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ConversationsPage } from './conversations';\nimport { IonicImageLoader } from 'ionic-image-loader';\n\n\n// Pages\n\n\n\n@NgModule({\n  declarations: [\n    ConversationsPage,\n  ],\n  imports: [\n\tIonicImageLoader,\n    IonicPageModule.forChild(ConversationsPage),\n  ],\n})\nexport class ConversationsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/conversations/conversations.module.ts","// Components, functions, plugins\nimport { Component, HostListener, ChangeDetectionStrategy, ChangeDetectorRef, NgModule } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, AlertController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { Http } from '@angular/http';\nimport 'rxjs/add/operator/map';\nimport { Database } from './../../providers/database/database';\nimport { Localstorage } from './../../providers/localstorage/localstorage';\nimport { ImageLoaderConfig } from 'ionic-image-loader';\nimport { IonicImageLoader } from 'ionic-image-loader';\n\n// Pages\nimport { ConversationPage } from '../conversation/conversation';\nimport { AttendeesPage } from '../attendees/attendees';\nimport { MorePage } from '../more/more';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-conversations',\n  templateUrl: 'conversations.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ConversationsPage {\n\t\n\tpublic Conversations: any[] = [];\n\n\tconstructor(public navCtrl: NavController, \n\t\t\t\tpublic navParams: NavParams,\n\t\t\t\tprivate storage: Storage,\n\t\t\t\tprivate databaseprovider: Database,\n\t\t\t\tprivate imageLoaderConfig: ImageLoaderConfig,\n\t\t\t\tprivate alertCtrl: AlertController,\n\t\t\t\tprivate cd: ChangeDetectorRef,\n\t\t\t\tpublic loadingCtrl: LoadingController,\n\t\t\t\tprivate localstorage: Localstorage) {\n\t}\n\n\tionViewDidLoad() {\n\t\tconsole.log('ionViewDidLoad SpeakersPage');\n\t}\n\n\n\tNavToPage(PageID) {\n\n\t\tvar AttendeeID = this.localstorage.getLocalValue('AttendeeID');\n\t\n\t\tswitch(PageID) {\n\t\t\tcase \"AttendeesPage\":\n\t\t\t\tthis.navCtrl.push(AttendeesPage, {}, {animate: true, direction: 'forward'});\n\t\t\t\tbreak;\n\t\n\t\t}\n\n\t};\n\n\tionViewDidEnter() {\n\t\t\n\t\tconsole.log('ionViewDidEnter ConversationsPage');\n\t\t\n\t\tthis.LoadData();\n\n\t}\n\n\tLoadData() {\n\n\t\t// Load initial data set here\n\t\t//let loading = this.loadingCtrl.create({\n\t\t//\tspinner: 'crescent',\n\t\t//\tcontent: 'Please wait...'\n\t\t//});\n\n\t\t//loading.present();\n\n\t\t// Blank and show loading info\n\t\tthis.Conversations = [];\n\t\tthis.cd.markForCheck();\n\t\tthis.imageLoaderConfig.setFallbackUrl('assets/img/personIcon.png');\n\t\t\n\t\t// Temporary use variables\n\t\tvar flags = \"li|Time|\";\n        var DisplayName = \"\";\n\t\tvar visDisplayCompany = \"\";\n\t\tvar AttendeeID = this.localstorage.getLocalValue('AttendeeID');\n\t\t\n\t\t// Get the data\n\t\tthis.databaseprovider.getMessagingData(flags, AttendeeID).then(data => {\n\t\t\t\n\t\t\tconsole.log(\"getMessagingData: \" + JSON.stringify(data));\n\n\t\t\tif (data['length']>0) {\n\t\t\t\t\n\t\t\t\tfor (var i = 0; i < data['length']; i++) {\n\n                    DisplayName = \"\";\n\n                    // Concatenate fields to build displayable name\n                    DisplayName = DisplayName + data[i].LastName + \", \" + data[i].FirstName;\n\t\t\t\t\t\n\t\t\t\t\t// Use Credentials field for Company/Association\n\t\t\t\t\tvisDisplayCompany = \"\";\n                    if (data[i].Company != \"\") {\n                        visDisplayCompany = data[i].Company;\n                    }\n\n\t\t\t\t\tvar imageAvatar = \"https://demoplanner.convergence-us.com/AdminGateway/2019/images/Attendees/\" + data[i].ConversationAttendeeID + \".jpg\";\n\t\t\t\t\tconsole.log('imageAvatar: ' + imageAvatar);\n\t\t\t\t\t\n\n\t\t\t\t\t// Add current record to the list\n\t\t\t\t\tthis.Conversations.push({\n\t\t\t\t\t\tConversationAttendeeID: data[i].ConversationAttendeeID,\n\t\t\t\t\t\tAttendeeName: DisplayName,\n\t\t\t\t\t\tAttendeeOrganization: visDisplayCompany,\n\t\t\t\t\t\tAttendeeAvatar: imageAvatar\n\t\t\t\t\t});\n\t\t\t\t\t\n\n\t\t\t\t}\n\n\n\t\t\t} else {\n\t\t\t\t\n                // No records to show\n\t\t\t\tthis.Conversations.push({\n\t\t\t\t\tConversationAttendeeID: 0,\n\t\t\t\t\tAttendeeName: \"No conversations available\",\n\t\t\t\t\tAttendeeOrganization: \"\",\n\t\t\t\t\tAttendeeAvatar: \"\"\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tthis.cd.markForCheck();\n\n\t\t\t//loading.dismiss();\n\t\t\t\n\t\t}).catch(function () {\n\t\t\tconsole.log(\"Promise Rejected\");\n\t\t});\n\t\t\t\t\t\n\t\t// Update LastSync date for next run\n\t\tvar ThisDirectChatCheck = new Date().toISOString().replace(/T/, ' ').replace(/\\..+/, '');\n\t\tthis.localstorage.setLocalValue('LastDirectChatCheck', ThisDirectChatCheck);\n\t\t\t\n\t\t\n\t}\n\n    ContinueConversation(ConversationAttendeeName, ConversationAttendeeID) {\n\t\t\n\t\tconsole.log(ConversationAttendeeID);\n\n\t\t//var AttendeeID = this.localstorage.getLocalValue('AttendeeID');\n\t\t\n\t\t//if (AttendeeID != '900000' && AttendeeID != '900001' && AttendeeID != '21' && AttendeeID != '22') {\n\t\t\t\n\t\t\t// Alert for successful save\n\t\t//\tlet savealert = this.alertCtrl.create({\n\t\t//\t\ttitle: 'Conversations',\n\t\t//\t\tsubTitle: 'The direct chat feature is not available at this time.',\n\t\t//\t\tbuttons: ['Ok']\n\t\t//\t});\n\t\t\t\n\t\t//\tsavealert.present();\n\n\t\t//} else {\n\t\t\t\n\t\t\tif (ConversationAttendeeID != 0) {\n\t\t\t\t\t\t\t\n\t\t\t\t// Navigate to Conversation Details page\n\t\t\t\tthis.localstorage.setLocalValue('ConversationAttendeeName', ConversationAttendeeName);\n\t\t\t\tthis.localstorage.setLocalValue('ConversationAttendeeID', ConversationAttendeeID);\n\t\t\t\tthis.navCtrl.push(ConversationPage, {ConversationAttendeeID: ConversationAttendeeID}, {animate: true, direction: 'forward'});\n\t\t\t\t\n\t\t\t}\n\t\t//}\n    };\n\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/conversations/conversations.ts"],"sourceRoot":""}