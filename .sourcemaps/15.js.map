{"version":3,"sources":["../../src/pages/activityfeedposting/activityfeedposting.module.ts","../../src/pages/activityfeedposting/activityfeedposting.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ActivityFeedPostingPage } from './activityfeedposting';\n\n@NgModule({\n  declarations: [\n    ActivityFeedPostingPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ActivityFeedPostingPage),\n  ],\n  exports: [\n    ActivityFeedPostingPage\n  ]\n})\nexport class ActivityFeedPostingPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/activityfeedposting/activityfeedposting.module.ts","// Components, functions, plugins\nimport { Component, HostListener, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { IonicPage, NavParams, NavController, ViewController, LoadingController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { HttpClient } from '@angular/common/http';\nimport 'rxjs/add/operator/map';\nimport { Database } from './../../providers/database/database';\nimport { Localstorage } from './../../providers/localstorage/localstorage';\nimport { AlertController } from 'ionic-angular';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\nimport { Observable } from 'rxjs/Observable';\nimport { normalizeURL } from 'ionic-angular';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n// Pages\nimport { HomePage } from '../home/home';\nimport { ActivityPage } from '../activity/activity';\n\n@IonicPage()\n@Component({\n  selector: 'page-activityfeedposting',\n  templateUrl: 'activityfeedposting.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ActivityFeedPostingPage {\n\n\tpublic CommentEntry: string;\n\tpublic ActivityFeedAttachment: string;\n\tpublic deviceButtons: boolean;\n\tpublic browserButtons: boolean;\n\t\n\tconstructor(public navCtrl: NavController,\n\t\t\t\tprivate navParams: NavParams, \n\t\t\t\tprivate storage: Storage,\n\t\t\t\tprivate databaseprovider: Database,\n\t\t\t\tprivate cd: ChangeDetectorRef,\n\t\t\t\tprivate alertCtrl: AlertController, \n\t\t\t\tprivate view: ViewController,\n\t\t\t\tpublic http: HttpClient,\n\t\t\t\tpublic loadingCtrl: LoadingController,\n\t\t\t\tprivate camera: Camera,\n\t\t\t\tpublic _DomSanitizer: DomSanitizer,\n\t\t\t\tprivate localstorage: Localstorage) {\n\t\t\t\t\n\t}\n\n\taddCameraImage() {\n\t\t\n\t\tconst options: CameraOptions = {\n\t\t\tdestinationType: this.camera.DestinationType.DATA_URL,\n\t\t\tencodingType: this.camera.EncodingType.JPEG,\n\t\t\tcorrectOrientation:true,\n\t\t\tmediaType: this.camera.MediaType.PICTURE\n\t\t}\n\n\t\tthis.camera.getPicture(options).then((imageData) => {\n\t\t\t// imageData is either a base64 encoded string or a file URI\n\t\t\t// If it's base64:\n\t\t\tconsole.log('Camera image');\n\t\t\t/*\n\t\t\tif (this.platform.is('ios')) {\n\t\t\t\tthis.base64Image = normalizeURL(imageData);\n\t\t\t\t// IF problem only occur in ios and normalizeURL \n\t\t\t\t//not work for you then you can also use \n\t\t\t\t//this.base64Image= imageData.replace(/^file:\\/\\//, '');\n\t\t\t} else {\n\t\t\t\tthis.base64Image= \"data:image/jpeg;base64,\" + imageData;\n\t\t\t}, error => {\n\t\t\t\tconsole.log('ERROR -> ' + JSON.stringify(error));\n\t\t\t});\n\t\t\t*/\n\t\t\tthis.ActivityFeedAttachment = 'data:image/jpeg;base64,' + imageData;\n\t\t\t//this.ActivityFeedAttachment = base64Image;\n\t\t\tthis.localstorage.setLocalValue('ActivityFeedPostedImage', 'Y');\n\t\t\n\t\t\tthis.cd.markForCheck();\n\t\t\t\n\t\t}, (err) => {\n\t\t\t// Handle error\n\t\t\tconsole.log('Camera error');\n\t\t\tconsole.log('Camera error: ' + JSON.stringify(err));\n\t\t});\n\n\t}\n\t\n\taddGalleryImage() {\n\t\t\n\t\tconst options: CameraOptions = {\n\t\t\tdestinationType: this.camera.DestinationType.DATA_URL,\n\t\t\tencodingType: this.camera.EncodingType.JPEG,\n\t\t\tmediaType: this.camera.MediaType.PICTURE,\n\t\t\tcorrectOrientation:true,\n\t\t\tallowEdit: true,\n\t\t\tsourceType: this.camera.PictureSourceType.PHOTOLIBRARY\n\t\t}\n\n\t\tthis.camera.getPicture(options).then((imageData) => {\n\t\t\t// imageData is either a base64 encoded string or a file URI\n\t\t\t// If it's base64:\n\t\t\tconsole.log('Camera image');\n\t\t\t//if (this.platform.is('ios')) {\n\t\t\t//\timageData = _DomSanitizer.bypassSecurityTrustUrl(imageData);\n\t\t\t//}\n\t\t\tthis.ActivityFeedAttachment = 'data:image/jpeg;base64,' + imageData;\n\t\t\t//this.ActivityFeedAttachment = base64Image;\n\t\t\tthis.localstorage.setLocalValue('ActivityFeedPostedImage', 'Y');\n\t\t\n\t\t\tthis.cd.markForCheck();\n\t\t\t\n\t\t}, (err) => {\n\t\t\t// Handle error\n\t\t\tconsole.log('Camera error');\n\t\t\tconsole.log('Camera error: ' + JSON.stringify(err));\n\t\t});\n\n\t}\n\t\n\tionViewDidEnter() {\n\n\t\tthis.ActivityFeedAttachment = '';\n\t\tthis.localstorage.setLocalValue('ActivityFeedPostedImage', 'N');\n\t\n\t\tvar CurrentDateTime = new Date().toISOString().replace(/T/, ' ').replace(/\\..+/, '').replace(/:/g, '').replace(/-/g,'').replace(' ', '');\n\t\tconsole.log('CurrentDateTime: ' + CurrentDateTime);\n\t\tvar DevicePlatform = this.localstorage.getLocalValue('DevicePlatform');\n\t\t\n\t\t// Disable access to camera and gallery buttons when running in a browser\n\t\t// until the ability to pull an image via the browser can be implemented\n\t\tif (DevicePlatform == 'Browser') {\n\t\t\tconsole.log('Browser button settings');\n\t\t\tthis.deviceButtons = false;\n\t\t\tthis.browserButtons = true;\n\t\t} else {\n\t\t\tconsole.log('Device button settings');\n\t\t\tthis.deviceButtons = true;\n\t\t\tthis.browserButtons = false;\n\t\t}\n\t\t\n\t\tthis.cd.markForCheck();\n\n\t}\n\t\n\tcloseModal(UserAction) {\n\t\t\n\t\tvar AttendeeID = this.localstorage.getLocalValue('AttendeeID');\n\n\t\tif (UserAction == \"Save\") {\n\n\t\t\tvar UserComment = this.CommentEntry || '';\n\t\t\t\n\t\t\tif (UserComment != '') {\n\t\t\t\t\n\t\t\t\tvar afpImage = this.localstorage.getLocalValue('ActivityFeedPostedImage');\n\n\t\t\t\t// Load initial data set here\n\t\t\t\tlet loading = this.loadingCtrl.create({\n\t\t\t\t\tspinner: 'crescent',\n\t\t\t\t\tcontent: 'Saving your posting and image...'\n\t\t\t\t});\n\n\t\t\t\tloading.present();\n\n\t\t\t\tvar CurrentDateTime = new Date().toISOString().replace(/T/, ' ').replace(/\\..+/, '');\n\t\t\t\tvar PostedDateTime = CurrentDateTime;\n\t\t\t\tCurrentDateTime = CurrentDateTime.replace(/T/, ' ').replace(/\\..+/, '').replace(/:/g, '').replace(/-/g,'').replace(' ', '');\n\t\t\t\t\n\t\t\t\tvar NewFilename = AttendeeID + '-' + CurrentDateTime;\n\t\t\t\tconsole.log('New filename: ' + NewFilename);\n\t\t\t\t\n\t\t\t\t//console.log('CommentEntry: ' + UserComment);\n\t\t\t\t//console.log('Image: ' + this.ActivityFeedAttachment);\n\t\t\t\t\n\t\t\t\tlet url = 'https://demoplanner.convergence-us.com/AdminGateway/2019/image_uploader.php';\n\t\t\t\tlet postData = new FormData();\n\t\t\t\tpostData.append('file', this.ActivityFeedAttachment);\n\t\t\t\tpostData.append('location', 'ActivityFeedAttachments');\n\t\t\t\tpostData.append('filename', NewFilename);\n\t\t\t\tpostData.append('Comment', UserComment);\n\t\t\t\tpostData.append('afpImage', afpImage);\n\t\t\t\tpostData.append('AttendeeID', AttendeeID);\n\t\t\t\t\n\t\t\t\tlet data:Observable<any> = this.http.post(url, postData);\n\t\t\t\t\n\t\t\t\tdata.subscribe((Postingresult) => {\n\t\t\t\t\t\n\t\t\t\t\tconsole.log(\"Image uploaded: \" + JSON.stringify(Postingresult));\n\t\t\t\t\tconsole.log('afID: ' + Postingresult.afID);\n\t\t\t\t\tloading.dismiss();\n\t\t\t\t\tthis.view.dismiss(UserAction);\n\t\t\t\t\t\t\t\n\t\t\t\t\t//var flags = 'ad|' + result.afID + '|' + UserComment + '|0|' + NewFilename + '.jpg|' + PostedDateTime;\n\t\t\t\t\t//this.localstorage.setLocalValue('ActivityFeedFlags', flags);\n\t\t\t\t\t\n\t\t\t\t\t//this.databaseprovider.getActivityFeedData(flags, AttendeeID).then(data3 => {\n\t\t\t\t\t\t\n\t\t\t\t\t//\tconsole.log(\"getActivityFeedData: \" + JSON.stringify(data3));\n\n\t\t\t\t\t//\tif (data3['length']>0) {\n\n\t\t\t\t\t//\t\tconsole.log(\"Return status: \" + data3[0].Status);\n\t\t\t\t\t//\t\tloading.dismiss();\n\t\t\t\t\t//\t\tthis.view.dismiss(UserAction);\n\t\t\t\t\t\t\t\n\t\t\t\t\t//\t}\n\t\t\t\t\t\n\t\t\t\t\t//}).catch(function () {\n\t\t\t\t\t//\tconsole.log(\"Activity Feed Promise Rejected\");\n\t\t\t\t\t//\tloading.dismiss();\n\t\t\t\t\t//});\n\n\t\t\t\t});\n\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tlet alert = this.alertCtrl.create({\n\t\t\t\t\ttitle: 'Posting Error',\n\t\t\t\t\tsubTitle: 'You cannot submit a posting with a blank comment.',\n\t\t\t\t\tbuttons: ['OK']\n\t\t\t\t});\n\t\t\t\talert.present();\n\n\t\t\t}\n\t\t\t\t\t\t\t\n\t\t}\n\t\t\n\t\tif (UserAction == \"Cancel\") {\n\t\t\tthis.view.dismiss(UserAction);\n\t\t}\n\t\t\n\t}\n\n\tclosePage(UserAction) {\n\t\t\n\t\tvar AttendeeID = this.localstorage.getLocalValue('AttendeeID');\n\n\t\tif (UserAction == \"Save\") {\n\n\t\t\tvar afpImage = this.localstorage.getLocalValue('ActivityFeedPostedImage');\n\n\t\t\t\t\n\t\t\t// Load initial data set here\n\t\t\tlet loading = this.loadingCtrl.create({\n\t\t\t\tspinner: 'crescent',\n\t\t\t\tcontent: 'Saving your posting and image...'\n\t\t\t});\n\n\t\t\tloading.present();\n\n\t\t\tvar CurrentDateTime = new Date().toISOString().replace(/T/, ' ').replace(/\\..+/, '');\n\t\t\tvar PostedDateTime = CurrentDateTime;\n\t\t\tCurrentDateTime = CurrentDateTime.replace(/T/, ' ').replace(/\\..+/, '').replace(/:/g, '').replace(/-/g,'').replace(' ', '');\n\t\t\t\n\t\t\tvar NewFilename = AttendeeID + '-' + CurrentDateTime;\n\t\t\tconsole.log('New filename: ' + NewFilename);\n\t\t\t\n\t\t\tvar UserComment = this.CommentEntry || '';\n\t\t\t//console.log('CommentEntry: ' + UserComment);\n\t\t\t//console.log('Image: ' + this.ActivityFeedAttachment);\n\t\t\t\n\t\t\tlet url = 'https://demoplanner.convergence-us.com/AdminGateway/2019/image_uploader.php';\n\t\t\tlet postData = new FormData();\n\t\t\tpostData.append('file', this.ActivityFeedAttachment);\n\t\t\tpostData.append('location', 'ActivityFeedAttachments');\n\t\t\tpostData.append('filename', NewFilename);\n\t\t\tpostData.append('Comment', UserComment);\n\t\t\tpostData.append('afpImage', afpImage);\n\t\t\tpostData.append('AttendeeID', AttendeeID);\n\t\t\t\n\t\t\tlet data:Observable<any> = this.http.post(url, postData);\n\t\t\t\n\t\t\tconsole.log('Activity Feed Posting: Uploading image to URL: ' + url);\n\t\t\t\n\t\t\tdata.subscribe((result) => {\n\t\t\t\t\n\t\t\t\tconsole.log(\"Image uploaded: \" + JSON.stringify(result));\n\t\t\t\tconsole.log('afID: ' + result.afID);\n\t\t\t\tloading.dismiss();\n\t\t\t\t\n\t\t\t\t//this.navCtrl.setRoot(ActivityPage);\n\t\t\t\tthis.navCtrl.pop();\n\t\t\t\t\t\t\n\t\t\t\t//var flags = 'ad|' + result.afID + '|' + UserComment + '|0|' + NewFilename + '.jpg|' + PostedDateTime;\n\t\t\t\t//this.localstorage.setLocalValue('ActivityFeedFlags', flags);\n\t\t\t\t\n\t\t\t\t//this.databaseprovider.getActivityFeedData(flags, AttendeeID).then(data3 => {\n\t\t\t\t\t\n\t\t\t\t//\tconsole.log(\"getActivityFeedData: \" + JSON.stringify(data3));\n\n\t\t\t\t//\tif (data3['length']>0) {\n\n\t\t\t\t//\t\tconsole.log(\"Return status: \" + data3[0].Status);\n\t\t\t\t//\t\tloading.dismiss();\n\t\t\t\t//\t\tthis.view.dismiss(UserAction);\n\t\t\t\t\t\t\n\t\t\t\t//\t}\n\t\t\t\t\n\t\t\t\t//}).catch(function () {\n\t\t\t\t//\tconsole.log(\"Activity Feed Promise Rejected\");\n\t\t\t\t//\tloading.dismiss();\n\t\t\t\t//});\n\n\t\t\t},\n\t\t\terr => {\n\t\t\t\tloading.dismiss();\n\t\t\t\tlet alert = this.alertCtrl.create({\n\t\t\t\t\ttitle: 'Image Upload Error',\n\t\t\t\t\tsubTitle: 'Problem receiving feedback from server - check log.',\n\t\t\t\t\tbuttons: ['OK']\n\t\t\t\t});\n\t\t\t\talert.present();\n\t\t\t\tconsole.log(err.status);\n\t\t\t\tconsole.log(\"Image uploader error: \", JSON.stringify(err));\n\t\t\t});\n\n\t\t}\n\t\t\n\t\tif (UserAction == \"Cancel\") {\n\t\t\t//this.navCtrl.setRoot(ActivityPage);\n\t\t\tthis.navCtrl.pop();\n\t\t}\n\t\t\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/activityfeedposting/activityfeedposting.ts"],"sourceRoot":""}